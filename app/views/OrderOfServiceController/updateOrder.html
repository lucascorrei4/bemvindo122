<!DOCTYPE html>
<html lang="${lang}">
<meta charset="utf-8
<!-- Head -->
#{include 'includes/headCrud.html' /}
<!-- Head -->
<body>
	<div id="wrapper">
		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
			<!-- Logo navbar -->
			#{include 'includes/logoNavBar.html' /}
			<!-- Logo navbar -->
			<!-- Menu Top Side -->
			#{include 'includes/menuPainelTop.html' /}
			<!-- Menu Top Side -->
			<!-- Menu Left Side -->
			#{include 'includes/menuPainelLeft.html' /}
			<!-- Menu Left Side -->
		</nav>
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Atualizar Pedidos</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			#{if request.actionMethod != 'index'} #{crud.navigation /} #{/if} #{if flash.success}
			<div class="row">
				<div class="col-lg-12">
					<div class="alert alert-info alert-dismissable">${flash.success}</div>
				</div>
			</div>
			#{/if} #{if flash.error || error}
			<div class="row">
				<div class="col-lg-12">
					<div class="alert alert-danger alert-dismissable">${error ?: flash.error}</div>
				</div>
			</div>
			#{/if}
			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">Clique nos itens abaixo para atualizar</div>
						<div class="panel-body">
							<div class="panel-group" id="accordion">
								#{list items:listOrderOfService, as:'orderOfService'}
									<div class="panel panel-default">
										<div class="panel-heading">
											<h4 class="panel-title">
												<a data-toggle="collapse" data-parent="#accordion" href="#collapse&{orderOfService.orderCode}" aria-expanded="false" class="collapsed"><b>&{orderOfService.orderCode}</b> ✷  ${orderOfService.postedAt} ✷  &{orderOfService.client.toString()} ✷  &{orderOfService.client.phone} ✷  &{orderOfService.client.mail}</a>
											</h4>
										</div>
										<div id="collapse&{orderOfService.orderCode}" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
											#{list items:orderOfService.mapOrderServiceSteps.keySet(), as:'key'}
												<div class="col-lg-12">
													<h4 style="color: #33AFE5; text-align: center;">
														<b>&{key.getTitle()}</b>
													</h4>
													<h5 style="color: gray; text-align: center;">
														<b>&{key.getDescription()}</b>
													</h5>
												</div>
												<div class="panel-body">
													#{list orderOfService.mapOrderServiceSteps.get(key), as:'orderServiceStep'}
			                                            Fase ${orderServiceStep_index} <label>&{orderServiceStep.step.title}</label> 
			                                            <code>
			                                            	O status atual é: <label style="font-style: italic; color: red;">&{orderServiceStep.status.label}</label>
			                                            </code>
			                                            <blockquote>
															<div class="form-group">
																#{list orderServiceStep.status.values(), as:'status'}
				                                            		<label class="radio-inline">
					                                                    <input name="options-&{orderOfService.orderCode.toLowerCase()}-&{orderServiceStep.step.id}" id="radio-${UUID.randomUUID().toString()}-${status_index}" #{if String.valueOf(status.value).equals(String.valueOf(orderServiceStep.status.value))}checked="checked"#{/if} value="&{status.value}" type="radio">&{status.label}
					                                                </label>
																#{/list}
					                                        </div>
						                                    <div class="form-group">
						                                    	<label>Observação</label>
						                                        <input class="form-control" placeholder="Caso haja algum imprevisto nesta fase, deixe o seu cliente informado.">
						                                    </div>
				                                        </blockquote>
													#{/list}
												</div>
											#{/list}
										</div>
									</div>
								#{/list}
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<div class="panel panel-default">
							<div class="panel-heading" style="text-align: center">&{'project.name'} © Copyright 2015 - Versão: &{'project.version'}</div>
						</div>
					</div>
				</div>
				<!-- /.row -->
			</div>
			<!-- /#page-wrapper -->
		</div>
		<!-- /#wrapper -->
	</div>
	<!-- footerCrud -->
	#{include 'includes/footerCrud.html' /}
	<!-- footerCrud -->
</body>
</html>
